import{g as Se,a as xe}from"./globe.gl-BdnZBKgG.js";var ce={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var De=ce.exports,we;function Oe(){return we||(we=1,function(D,E){((x,o)=>{D.exports=o()})(De,function x(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},C,M=!o.document&&!!o.postMessage,q=o.IS_PAPA_WORKER||!1,Z={},Y=0,a={};function B(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var n=pe(t);n.chunkSize=parseInt(n.chunkSize),t.step||t.chunk||(n.chunkSize=null),this._handle=new ie(n),(this._handle.streamer=this)._config=n}).call(this,e),this.parseChunk=function(t,n){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let c=this._config.newline;c||(i=this._config.quoteChar||'"',c=this._handle.guessLineEndings(t,i)),t=[...t.split(c).slice(r)].join(c)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(i=this._config.beforeFirstChunk(t))!==void 0&&(t=i),this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+t,i=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=i.meta.cursor,r=(this._finished||(this._partialLine=r.substring(t-this._baseIndex),this._baseIndex=t),i&&i.data&&(this._rowCount+=i.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),q)o.postMessage({results:i,workerId:a.WORKER_ID,finished:r});else if(k(this._config.chunk)&&!n){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!r||!k(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(t){k(this._config.error)?this._config.error(t):q&&this._config.error&&o.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function X(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),B.call(this,e),this._nextChunk=M?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),M||(t.onload=te(this._chunkLoaded,this),t.onerror=te(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!M),this._config.downloadRequestHeaders){var n,r=this._config.downloadRequestHeaders;for(n in r)t.setRequestHeader(n,r[n])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(c){this._chunkError(c.message)}M&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(n=>(n=n.getResponseHeader("Content-Range"))!==null?parseInt(n.substring(n.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(n){n=t.statusText||n,this._sendError(new Error(n))}}function G(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),B.call(this,e);var t,n,r=typeof FileReader<"u";this.stream=function(i){this._input=i,n=i.slice||i.webkitSlice||i.mozSlice,r?((t=new FileReader).onload=te(this._chunkLoaded,this),t.onerror=te(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var i=this._input,c=(this._config.chunkSize&&(c=Math.min(this._start+this._config.chunkSize,this._input.size),i=n.call(i,this._start,c)),t.readAsText(i,this._config.encoding));r||this._chunkLoaded({target:{result:c}})},this._chunkLoaded=function(i){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(i.target.result)},this._chunkError=function(){this._sendError(t.error)}}function ee(e){var t;B.call(this,e=e||{}),this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){var n,r;if(!this._finished)return n=this._config.chunkSize,t=n?(r=t.substring(0,n),t.substring(n)):(r=t,""),this._finished=!t,this.parseChunk(r)}}function se(e){B.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){B.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){B.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(i){this._input=i,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=te(function(i){try{t.push(typeof i=="string"?i:i.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(c){this._streamError(c)}},this),this._streamError=te(function(i){this._streamCleanUp(),this._sendError(i)},this),this._streamEnd=te(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=te(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ie(e){var t,n,r,i,c=Math.pow(2,53),T=-c,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,N=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,f=this,b=0,u=0,j=!1,l=!1,p=[],s={data:[],errors:[],meta:{}};function I(g){return e.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function O(){if(s&&r&&(W("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(s.data=s.data.filter(function(h){return!I(h)})),F()){let h=function(S,A){k(e.transformHeader)&&(S=e.transformHeader(S,A)),p.push(S)};if(s)if(Array.isArray(s.data[0])){for(var g=0;F()&&g<s.data.length;g++)s.data[g].forEach(h);s.data.splice(0,1)}else s.data.forEach(h)}function m(h,S){for(var A=e.header?{}:[],y=0;y<h.length;y++){var v=y,_=h[y],_=((H,d)=>(w=>(e.dynamicTypingFunction&&e.dynamicTyping[w]===void 0&&(e.dynamicTyping[w]=e.dynamicTypingFunction(w)),(e.dynamicTyping[w]||e.dynamicTyping)===!0))(H)?d==="true"||d==="TRUE"||d!=="false"&&d!=="FALSE"&&((w=>{if(U.test(w)&&(w=parseFloat(w),T<w&&w<c))return 1})(d)?parseFloat(d):N.test(d)?new Date(d):d===""?null:d):d)(v=e.header?y>=p.length?"__parsed_extra":p[y]:v,_=e.transform?e.transform(_,v):_);v==="__parsed_extra"?(A[v]=A[v]||[],A[v].push(_)):A[v]=_}return e.header&&(y>p.length?W("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+y,u+S):y<p.length&&W("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+y,u+S)),A}var R;s&&(e.header||e.dynamicTyping||e.transform)&&(R=1,!s.data.length||Array.isArray(s.data[0])?(s.data=s.data.map(m),R=s.data.length):s.data=m(s.data,0),e.header&&s.meta&&(s.meta.fields=p),u+=R)}function F(){return e.header&&p.length===0}function W(g,m,R,h){g={type:g,code:m,message:R},h!==void 0&&(g.row=h),s.errors.push(g)}k(e.step)&&(i=e.step,e.step=function(g){s=g,F()?O():(O(),s.data.length!==0&&(b+=g.data.length,e.preview&&b>e.preview?n.abort():(s.data=s.data[0],i(s,f))))}),this.parse=function(g,m,R){var h=e.quoteChar||'"',h=(e.newline||(e.newline=this.guessLineEndings(g,h)),r=!1,e.delimiter?k(e.delimiter)&&(e.delimiter=e.delimiter(g),s.meta.delimiter=e.delimiter):((h=((S,A,y,v,_)=>{var H,d,w,ne;_=_||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ae=0;ae<_.length;ae++){for(var K,he=_[ae],P=0,$=0,L=0,z=(w=void 0,new fe({comments:v,delimiter:he,newline:A,preview:10}).parse(S)),V=0;V<z.data.length;V++)y&&I(z.data[V])?L++:(K=z.data[V].length,$+=K,w===void 0?w=K:0<K&&(P+=Math.abs(K-w),w=K));0<z.data.length&&($/=z.data.length-L),(d===void 0||P<=d)&&(ne===void 0||ne<$)&&1.99<$&&(d=P,H=he,ne=$)}return{successful:!!(e.delimiter=H),bestDelimiter:H}})(g,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=h.bestDelimiter:(r=!0,e.delimiter=a.DefaultDelimiter),s.meta.delimiter=e.delimiter),pe(e));return e.preview&&e.header&&h.preview++,t=g,n=new fe(h),s=n.parse(t,m,R),O(),j?{meta:{paused:!0}}:s||{meta:{paused:!1}}},this.paused=function(){return j},this.pause=function(){j=!0,n.abort(),t=k(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){f.streamer._halted?(j=!1,f.streamer.parseChunk(t,!0)):setTimeout(f.resume,3)},this.aborted=function(){return l},this.abort=function(){l=!0,n.abort(),s.meta.aborted=!0,k(e.complete)&&e.complete(s),t=""},this.guessLineEndings=function(S,h){S=S.substring(0,1048576);var h=new RegExp(re(h)+"([^]*?)"+re(h),"gm"),R=(S=S.replace(h,"")).split("\r"),h=S.split(`
`),S=1<h.length&&h[0].length<R[0].length;if(R.length===1||S)return`
`;for(var A=0,y=0;y<R.length;y++)R[y][0]===`
`&&A++;return A>=R.length/2?`\r
`:"\r"}}function re(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fe(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,i=e.step,c=e.preview,T=e.fastMode,U=null,N=!1,f=e.quoteChar==null?'"':e.quoteChar,b=f;if(e.escapeChar!==void 0&&(b=e.escapeChar),(typeof t!="string"||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,j=!1;this.parse=function(l,p,s){if(typeof l!="string")throw new Error("Input must be a string");var I=l.length,O=t.length,F=n.length,W=r.length,g=k(i),m=[],R=[],h=[],S=u=0;if(!l)return P();if(T||T!==!1&&l.indexOf(f)===-1){for(var A=l.split(n),y=0;y<A.length;y++){if(h=A[y],u+=h.length,y!==A.length-1)u+=n.length;else if(s)return P();if(!r||h.substring(0,W)!==r){if(g){if(m=[],ne(h.split(t)),$(),j)return P()}else ne(h.split(t));if(c&&c<=y)return m=m.slice(0,c),P(!0)}}return P()}for(var v=l.indexOf(t,u),_=l.indexOf(n,u),H=new RegExp(re(b)+re(f),"g"),d=l.indexOf(f,u);;)if(l[u]===f)for(d=u,u++;;){if((d=l.indexOf(f,d+1))===-1)return s||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:m.length,index:u}),K();if(d===I-1)return K(l.substring(u,d).replace(H,f));if(f===b&&l[d+1]===b)d++;else if(f===b||d===0||l[d-1]!==b){v!==-1&&v<d+1&&(v=l.indexOf(t,d+1));var w=ae((_=_!==-1&&_<d+1?l.indexOf(n,d+1):_)===-1?v:Math.min(v,_));if(l.substr(d+1+w,O)===t){h.push(l.substring(u,d).replace(H,f)),l[u=d+1+w+O]!==f&&(d=l.indexOf(f,u)),v=l.indexOf(t,u),_=l.indexOf(n,u);break}if(w=ae(_),l.substring(d+1+w,d+1+w+F)===n){if(h.push(l.substring(u,d).replace(H,f)),he(d+1+w+F),v=l.indexOf(t,u),d=l.indexOf(f,u),g&&($(),j))return P();if(c&&m.length>=c)return P(!0);break}R.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:m.length,index:u}),d++}}else if(r&&h.length===0&&l.substring(u,u+W)===r){if(_===-1)return P();u=_+F,_=l.indexOf(n,u),v=l.indexOf(t,u)}else if(v!==-1&&(v<_||_===-1))h.push(l.substring(u,v)),u=v+O,v=l.indexOf(t,u);else{if(_===-1)break;if(h.push(l.substring(u,_)),he(_+F),g&&($(),j))return P();if(c&&m.length>=c)return P(!0)}return K();function ne(L){m.push(L),S=u}function ae(L){var z=0;return z=L!==-1&&(L=l.substring(d+1,L))&&L.trim()===""?L.length:z}function K(L){return s||(L===void 0&&(L=l.substring(u)),h.push(L),u=I,ne(h),g&&$()),P()}function he(L){u=L,ne(h),h=[],_=l.indexOf(n,u)}function P(L){if(e.header&&!p&&m.length&&!N){var z=m[0],V={},ge=new Set(z);let ve=!1;for(let oe=0;oe<z.length;oe++){let Q=z[oe];if(V[Q=k(e.transformHeader)?e.transformHeader(Q,oe):Q]){let le,Ee=V[Q];for(;le=Q+"_"+Ee,Ee++,ge.has(le););ge.add(le),z[oe]=le,V[Q]++,ve=!0,(U=U===null?{}:U)[le]=Q}else V[Q]=1,z[oe]=Q;ge.add(Q)}ve&&console.warn("Duplicate headers found and renamed."),N=!0}return{data:m,errors:R,meta:{delimiter:t,linebreak:n,aborted:j,truncated:!!L,cursor:S+(p||0),renamedHeaders:U}}}function $(){i(P()),m=[],R=[]}},this.abort=function(){j=!0},this.getCharIndex=function(){return u}}function Re(e){var t=e.data,n=Z[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,ye(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ke,resume:ke};if(k(n.userStep)){for(var c=0;c<t.results.data.length&&(n.userStep({data:t.results.data[c],errors:t.results.errors,meta:t.results.meta},i),!r);c++);delete t.results}else k(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&ye(t.workerId,t.results)}function ye(e,t){var n=Z[e];k(n.userComplete)&&n.userComplete(t),n.terminate(),delete Z[e]}function ke(){throw new Error("Not implemented.")}function pe(e){if(typeof e!="object"||e===null)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=pe(e[t]);return n}function te(e,t){return function(){e.apply(t,arguments)}}function k(e){return typeof e=="function"}return a.parse=function(e,t){var n=(t=t||{}).dynamicTyping||!1;if(k(n)&&(t.dynamicTypingFunction=n,n={}),t.dynamicTyping=n,t.transform=!!k(t.transform)&&t.transform,!t.worker||!a.WORKERS_SUPPORTED)return n=null,a.NODE_STREAM_INPUT,typeof e=="string"?(e=(r=>r.charCodeAt(0)!==65279?r:r.slice(1))(e),n=new(t.download?X:ee)(t)):e.readable===!0&&k(e.read)&&k(e.on)?n=new se(t):(o.File&&e instanceof File||e instanceof Object)&&(n=new G(t)),n.stream(e);(n=(()=>{var r;return!!a.WORKERS_SUPPORTED&&(r=(()=>{var i=o.URL||o.webkitURL||null,c=x.toString();return a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",c,")();"],{type:"text/javascript"})))})(),(r=new o.Worker(r)).onmessage=Re,r.id=Y++,Z[r.id]=r)})()).userStep=t.step,n.userChunk=t.chunk,n.userComplete=t.complete,n.userError=t.error,t.step=k(t.step),t.chunk=k(t.chunk),t.complete=k(t.complete),t.error=k(t.error),delete t.worker,n.postMessage({input:e,config:t,workerId:n.id})},a.unparse=function(e,t){var n=!1,r=!0,i=",",c=`\r
`,T='"',U=T+T,N=!1,f=null,b=!1,u=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||a.BAD_DELIMITERS.filter(function(p){return t.delimiter.indexOf(p)!==-1}).length||(i=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(n=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(N=t.skipEmptyLines),typeof t.newline=="string"&&(c=t.newline),typeof t.quoteChar=="string"&&(T=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");f=t.columns}t.escapeChar!==void 0&&(U=t.escapeChar+T),t.escapeFormulae instanceof RegExp?b=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(b=/^[=+\-@\t\r].*$/)}})(),new RegExp(re(T),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return j(null,e,N);if(typeof e[0]=="object")return j(f||Object.keys(e[0]),e,N)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||f),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),j(e.fields||[],e.data||[],N);throw new Error("Unable to serialize unrecognized input");function j(p,s,I){var O="",F=(typeof p=="string"&&(p=JSON.parse(p)),typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(p)&&0<p.length),W=!Array.isArray(s[0]);if(F&&r){for(var g=0;g<p.length;g++)0<g&&(O+=i),O+=l(p[g],g);0<s.length&&(O+=c)}for(var m=0;m<s.length;m++){var R=(F?p:s[m]).length,h=!1,S=F?Object.keys(s[m]).length===0:s[m].length===0;if(I&&!F&&(h=I==="greedy"?s[m].join("").trim()==="":s[m].length===1&&s[m][0].length===0),I==="greedy"&&F){for(var A=[],y=0;y<R;y++){var v=W?p[y]:y;A.push(s[m][v])}h=A.join("").trim()===""}if(!h){for(var _=0;_<R;_++){0<_&&!S&&(O+=i);var H=F&&W?p[_]:_;O+=l(s[m][H],_)}m<s.length-1&&(!I||0<R&&!S)&&(O+=c)}}return O}function l(p,s){var I,O;return p==null?"":p.constructor===Date?JSON.stringify(p).slice(1,25):(O=!1,b&&typeof p=="string"&&b.test(p)&&(p="'"+p,O=!0),I=p.toString().replace(u,U),(O=O||n===!0||typeof n=="function"&&n(p,s)||Array.isArray(n)&&n[s]||((F,W)=>{for(var g=0;g<W.length;g++)if(-1<F.indexOf(W[g]))return!0;return!1})(I,a.BAD_DELIMITERS)||-1<I.indexOf(i)||I.charAt(0)===" "||I.charAt(I.length-1)===" ")?T+I+T:I)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!M&&!!o.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=fe,a.ParserHandle=ie,a.NetworkStreamer=X,a.FileStreamer=G,a.StringStreamer=ee,a.ReadableStreamStreamer=se,o.jQuery&&((C=o.jQuery).fn.parse=function(e){var t=e.config||{},n=[];return this.each(function(c){if(!(C(this).prop("tagName").toUpperCase()==="INPUT"&&C(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var T=0;T<this.files.length;T++)n.push({file:this.files[T],inputElem:this,instanceConfig:C.extend({},t)})}),r(),this;function r(){if(n.length===0)k(e.complete)&&e.complete();else{var c,T,U,N,f=n[0];if(k(e.before)){var b=e.before(f.file,f.inputElem);if(typeof b=="object"){if(b.action==="abort")return c="AbortError",T=f.file,U=f.inputElem,N=b.reason,void(k(e.error)&&e.error({name:c},T,U,N));if(b.action==="skip")return void i();typeof b.config=="object"&&(f.instanceConfig=C.extend(f.instanceConfig,b.config))}else if(b==="skip")return void i()}var u=f.instanceConfig.complete;f.instanceConfig.complete=function(j){k(u)&&u(j,f.file,f.inputElem),i()},a.parse(f.file,f.instanceConfig)}}function i(){n.splice(0,1),r()}}),q&&(o.onmessage=function(e){e=e.data,a.WORKER_ID===void 0&&e&&(a.WORKER_ID=e.workerId),typeof e.input=="string"?o.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(o.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&o.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(X.prototype=Object.create(B.prototype)).constructor=X,(G.prototype=Object.create(B.prototype)).constructor=G,(ee.prototype=Object.create(ee.prototype)).constructor=ee,(se.prototype=Object.create(B.prototype)).constructor=se,a})}(ce)),ce.exports}var Ce=Oe();const Te=Se(Ce);async function be(D){const E=await fetch(D);if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const x=await E.text();return Te.parse(x,{header:!0,skipEmptyLines:!0}).data}const Ie=D=>D.map(E=>{const x=document.createElement("section");x.dataset.name=E.name,x.classList.add("snap-section");const o=document.createElement("div");o.classList.add("content-left");const C=document.createElement("div");C.classList.add("content-right");const M=document.createElement("h1");M.textContent=E.title,M.classList.add("content-title");const q=document.createElement("p");return q.innerText=E.desc,q.classList.add("content-desc"),[M,q].forEach(Z=>{Z.style.opacity=0}),o.append(M),o.append(q),x.append(o),x.append(C),x}),_e=({transitionName:D,transitionTimingFunction:E,transitionDelay:x,transitionDuration:o,transitionDirection:C})=>`${D} ${o}ms ${E} ${x}ms ${C}`,de=(D,E)=>E.find(o=>o.name===D)||E.find(o=>o.name==="default"),Ae=D=>{const E=D.clientWidth*D.clientHeight,o=Math.max(.6,Math.min(1,E/786432));return D.clientWidth<768?o+.3:o},Le=document.getElementById("main-content"),ue=document.getElementById("globe-container"),me=[],J=new xe(ue,{animateIn:!0,autoRotate:!1,width:ue.clientWidth,height:ue.clientHeight,pointOfView:{altitude:Ae(ue)},pointsData:me});J.globeImageUrl("./textures/earth_day.jpg");function Fe(D,E){let x;const o={root:null,rootMargin:"0px",threshold:.6},C=new IntersectionObserver(M=>{M.forEach(q=>{const Z=q.target.dataset.name,Y=E.find(G=>G.name===Z),a=Y.transtionDetails,B=q.isIntersecting,X=q.target;if(B){J.controls().autoRotate=!1;const G=X.querySelector(".content-title"),ee=X.querySelector(".content-desc"),se=X.querySelectorAll(".image-container");G&&(G.style.animation=_e(a.titleTransitionDetails)),ee&&(ee.style.animation=_e(a.descTransitionDetails)),se.forEach(re=>{re.style.animation=_e(a.imageTransitionDetails)});const ie=a.cameraPanTransitionDetails;je(Y.lat,Y.lng,Y.color),J.pointOfView({lat:Y.lat,lng:Y.lng,altitude:.9},parseInt(ie.transitionDelay)),clearTimeout(x),x=setTimeout(()=>{J.pointOfView({altitude:2.5},parseInt(ie.transitionDelay)),J.controls().autoRotate=!0},parseInt(ie.transitionDelay)+parseInt(ie.transitionDuration))}})},o);D.forEach(M=>C.observe(M))}async function Me(){const D=await be("./data/details.csv"),E=await be("./data/transitions.csv"),x=D.map(C=>{const M={titleTransitionDetails:de(C.titleTransitionName,E),descTransitionDetails:de(C.descTransitionName,E),imageTransitionDetails:de(C.imageTransitionName,E),cameraPanTransitionDetails:de(C.cameraPanTransitionName,E)};return C.transtionDetails=M,C}),o=Ie(D);Le.append(...o),Fe(o,x)}Me();const je=(D,E,x="red")=>{me.push({lat:D,lng:E,altitude:.05,color:x}),J.pointColor(o=>o.color),J.pointAltitude(o=>o.altitude),J.pointsData(me)};window.addEventListener("resize",()=>{J.width([ue.clientWidth]),J.height([ue.clientHeight])});
